"use strict";(self["webpackChunkvue3_book_oneline"]=self["webpackChunkvue3_book_oneline"]||[]).push([[27],{27:function(e,s,a){a.r(s),a.d(s,{default:function(){return Q}});var t=a(3396);const n={class:"container"};function o(e,s,a,o,l,i){const c=(0,t.up)("SignUpForm");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(c)])}var l=a(7139);const i=e=>((0,t.dD)("data-v-c480c70c"),e=e(),(0,t.Cn)(),e),c={class:"form-container"},r={key:0},d={key:1},m=i((()=>(0,t._)("span",{class:"title"},"회원가입",-1))),u={class:"sub-title"},p=i((()=>(0,t._)("button",{class:"btn btn--black btn--large"}," 회원가입 ",-1)));function g(e,s,a,n,o,i){const g=(0,t.up)("FontAwesomeIcon"),k=(0,t.up)("UserMessageModal"),h=(0,t.up)("CustomForm");return(0,t.wg)(),(0,t.iD)("div",c,[1==n.isShow?((0,t.wg)(),(0,t.j4)(k,{key:0,content:n.signUpMsg,onClose:n.modalClose},{body:(0,t.w5)((()=>[0==n.signUpMsg.status?((0,t.wg)(),(0,t.iD)("span",r,[(0,t.Wm)(g,{icon:"triangle-exclamation"}),(0,t.Uk)(" "+(0,l.zw)(n.signUpMsg.errorMsg),1)])):(0,t.kq)("",!0),1==n.signUpMsg.status?((0,t.wg)(),(0,t.iD)("span",d,[(0,t.Wm)(g,{icon:"circle-check"}),(0,t.Uk)(" "+(0,l.zw)(n.signUpMsg.successMsg),1)])):(0,t.kq)("",!0)])),_:1},8,["content","onClose"])):(0,t.kq)("",!0),(0,t.Wm)(h,{schema:e.schema,onChild:n.registerUser},{header:(0,t.w5)((()=>[m,(0,t._)("span",u,(0,l.zw)("방문자님 오신 것을 환영합니다. 회원정보를 입력해주세요."),1)])),main:(0,t.w5)((()=>[])),footer:(0,t.w5)((()=>[p])),_:1},8,["schema","onChild"])])}a(7658);const k={class:"custorm-form-conatiner"},h={class:"form-inner"},w={class:"form-inner"},f=["for"],v={key:0},b=["disabled","onClick"],_=["onClick"],y={key:1,class:"error-status"},C={key:2,class:"warn"},U={key:3,class:"error-status"},I={key:4,class:"success-status"};function F(e,s,a,n,o,i){const c=(0,t.up)("Field"),r=(0,t.up)("FontAwesomeIcon"),d=(0,t.up)("Form");return(0,t.wg)(),(0,t.iD)("div",k,[(0,t._)("div",h,[(0,t.WI)(e.$slots,"header",{},void 0,!0),(0,t.WI)(e.$slots,"main",{},(()=>[(0,t.Wm)(d,{onSubmit:n.onSubmit},{default:(0,t.w5)((({meta:s,errors:o,values:i})=>[(0,t._)("div",w,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.schema.fields,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.name,class:"input-area"},[(0,t._)("label",{for:e.name},(0,l.zw)(e.label),9,f),(0,t.Wm)(c,{as:e.as,name:e.name,type:e.type,rules:e.rules,placeholder:e.placeholder,class:(0,l.C_)({invalid:void 0!==o[e.name],valid:s.valid&&1==n.state.msg}),onInput:e=>n.checkId(i["id"])},null,8,["as","name","type","rules","placeholder","class","onInput"]),0==e.status&&0==n.state.msg?((0,t.wg)(),(0,t.iD)("span",v,[(0,t._)("input",{disabled:1==n.state.msg,type:"button",class:"btn btn--outline--blue",value:"중복확인",onClick:e=>n.duplicateIdCheck(i["id"])},null,8,b),(0,t._)("button",{type:"button",class:"btn btn--outline--circle",onClick:e=>n.resetField(i["id"]="")},[(0,t.Wm)(r,{icon:["fas","xmark"]})],8,_)])):(0,t.kq)("",!0),void 0!==o[e.name]?((0,t.wg)(),(0,t.iD)("span",y,[(0,t.Wm)(r,{icon:["fas","circle-exclamation"]}),(0,t.Uk)(" "+(0,l.zw)(o[e.name]),1)])):(0,t.kq)("",!0),void 0===i["id"]&&"id"==e.name?((0,t.wg)(),(0,t.iD)("span",C,[(0,t.Wm)(r,{icon:["fas","circle-exclamation"]}),(0,t.Uk)(" "+(0,l.zw)(e.fail[1]),1)])):(0,t.kq)("",!0),""!==i["id"]&&!1===n.state.msg&&e.fail?((0,t.wg)(),(0,t.iD)("span",U,[(0,t.Wm)(r,{icon:["fas","circle-exclamation"]}),(0,t.Uk)(" "+(0,l.zw)(e.fail[0]),1)])):(0,t.kq)("",!0),""!==i["id"]&&!0===n.state.msg&&e.fail?((0,t.wg)(),(0,t.iD)("span",I,[(0,t.Wm)(r,{icon:["fas","circle-check"]}),(0,t.Uk)(" "+(0,l.zw)(e.fail[2]),1)])):(0,t.kq)("",!0)])))),128)),(0,t.WI)(e.$slots,"footer",{},void 0,!0)])])),_:3},8,["onSubmit"])]),!0)])])}var W=a(5708),q=a(4870);function D(e,s){if(""===e||""===s)return;let a=s.split("@")[0].length-3;const t=e.replace(/(?<=.{1})./gi,"*"),n=s.replace(new RegExp(".(?=.{0,"+a+"}@)","gi"),"*");return{maskName:t,maskEmail:n}}var M=a(70),x={components:{Form:W.Form,Field:W.Field},props:{schema:{type:Object,required:!0}},emits:{child:null},setup(e,s){const a=(0,q.qj)({id:"",msg:""}),n=e=>{console.log("customForm signInfo",e);let{name:t,email:n}=e;const o=D(t,n),{maskName:l,maskEmail:i}=o;e.name=l,e.email=i,1==a.msg&&s.emit("child",e)},o=()=>{a.msg=""},l=e=>{a.id=e};(0,t.YP)((()=>a.id),((e,s)=>{e!==s&&(a.msg="")}));const i=async e=>{const s=/^(?=.*[a-zA-Z])[-a-zA-Z0-9_.]{5,20}$/;if("null"==e||void 0==e||!s.test(e))return!1;await M.ZP.get("http://localhost:3000/api/user/register/"+e,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e.data),a.msg=e.data.status})).catch((e=>{console.log(e.response),a.msg=e.response.data.status}))};return{state:a,resetField:o,checkId:l,duplicateIdCheck:i,onSubmit:n}}},z=a(89);const S=(0,z.Z)(x,[["render",F],["__scopeId","data-v-1a093e30"]]);var j=S,Z=a(9242);const $={class:"modal-card"},A={class:"modal-inner"},E={class:"modal-header"},H={class:"modal-body"};function K(e,s,a,n,o,i){const c=(0,t.up)("FontAwesomeIcon");return(0,t.wg)(),(0,t.j4)(Z.uT,{name:"fade",class:(0,l.C_)(["modal",{error:0==n.state.isError,success:1==a.content.status}])},{default:(0,t.w5)((()=>[(0,t._)("div",$,[(0,t._)("button",{type:"text",class:"btn btn--close",onClick:s[0]||(s[0]=(0,Z.iM)(((...e)=>n.close&&n.close(...e)),["self"]))},[(0,t.Wm)(c,{icon:"fa-solid fa-xmark"})]),(0,t._)("div",A,[(0,t._)("div",E,[(0,t.WI)(e.$slots,"header",{},void 0,!0)]),(0,t._)("div",H,[(0,t.WI)(e.$slots,"body",{},void 0,!0)]),(0,t.WI)(e.$slots,"footer",{},void 0,!0)])])])),_:3},8,["class"])}var N={props:{content:{type:Object,default:()=>{}}},emits:["close"],setup(e,s){const{content:a}=(0,q.BK)(e);let n=(0,q.qj)({show:!1,isError:(0,t.Fl)((()=>0==a.status))});const o=()=>{s.emit("close",n.show)};return{state:n,close:o}}};const O=(0,z.Z)(N,[["render",K],["__scopeId","data-v-1bf3cef2"]]);var P=O,R=a(65),T=a(2483),Y={components:{CustomForm:j,UserMessageModal:P},setup(){const e=(0,q.iH)(!1),s=(0,R.oR)(),a=(0,T.tv)(),n=()=>s.commit("user/signUpCheck"),o=(0,t.Fl)((()=>s.state.user.signUpStatus)),l=t=>{e.value=!0,s.dispatch("user/regsiterUser",t),a.push({name:"Home"})},i=()=>{e.value=!1};return{isShow:e,signUpCheck:n,signUpMsg:o,registerUser:l,modalClose:i}},data:()=>{const e={fields:[{label:"이름",name:"name",as:"input",type:"text",rules:"required|name",placeholder:"이름 입력"},{label:"이메일",name:"email",as:"input",type:"text",rules:"required|email",placeholder:"이메일 주소(예시: hong@gmail.com)"},{label:"아이디",name:"id",as:"input",type:"text",rules:"required|id",status:!1,fail:["이미 사용중인 아이디입니다.","중복 확인은 필수입니다.","사용 가능한 아이디입니다."],placeholder:"아이디 입력(5자-20자)"},{label:"비밀번호",name:"password",as:"input",type:"password",rules:"required|password",placeholder:"비밀번호 입력(8자-20자)"},{label:"비밀번호 재확인",name:"passwordCheck",as:"input",type:"password",rules:"confirmed:@password",placeholder:"비밀번호 재입력"}]};return{schema:e}}};const B=(0,z.Z)(Y,[["render",g],["__scopeId","data-v-c480c70c"]]);var G=B,J={components:{SignUpForm:G}};const L=(0,z.Z)(J,[["render",o],["__scopeId","data-v-1717219c"]]);var Q=L}}]);
//# sourceMappingURL=27.4b18dd22.js.map